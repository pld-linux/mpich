--- mpich-1.2.5/mpid/ch_p4/configure.orig	Fri Oct  4 23:22:22 2002
+++ mpich-1.2.5/mpid/ch_p4/configure	Sat Apr  5 09:46:24 2003
@@ -1165,6 +1165,7 @@
   ;;
 esac
 fi
+set -x
 RSHCOMMAND="$ac_cv_path_RSHCOMMAND"
 if test -n "$RSHCOMMAND"; then
   echo "$ac_t""$RSHCOMMAND" 1>&1
@@ -1173,22 +1174,8 @@
 fi
 
         if test -n "$RSHCOMMAND" ; then
-	    echo $ac_n "checking whether $RSHCOMMAND works""... $ac_c" 1>&1
-echo "configure:1178: checking whether $RSHCOMMAND works" >&2
-            output=`$RSHCOMMAND $machine -n true 2>&1 </dev/null`
-            if test -n "$output" ; then
-		echo "$ac_t""no" 1>&1
-		echo "Errors while trying to run true on $machine with $program"
-		echo "$output"
-		RSHCOMMAND=""
-		# HORRIBLE, TERRIBLE BUG in AUTOCONF!!!
-		# It is determined to INCORRECTLY remember some results,
-		# while forgetting others (like "cross-compiling")
-		unset ac_cv_path_RSHCOMMAND
-            else
 		echo "$ac_t""yes" 1>&1
 		break
-	    fi
         fi
     done
     # Check ssh with special options to avoid user prompting which causes the
@@ -1229,25 +1216,11 @@
 fi
 
     	if test -n "$RSHCOMMAND" ; then
-    	    echo $ac_n "checking whether $RSHCOMMAND works""... $ac_c" 1>&1
-echo "configure:1235: checking whether $RSHCOMMAND works" >&2
-    	    output=`$RSHCOMMAND -o "StrictHostKeyChecking no" \
-    	      -o "BatchMode yes" $machine -n true 2>&1 </dev/null`
-    	    if test $? -ne 0 ; then
-    		echo "$ac_t""no" 1>&1
-    		echo "Errors while trying to run true on $machine with ssh"
-    		echo "$output"
-    		RSHCOMMAND=""
-    		# HORRIBLE, TERRIBLE BUG in AUTOCONF!!!
-    		# It is determined to INCORRECTLY remember some results,
-    		# while forgetting others (like "cross-compiling")
-    		unset ac_cv_path_RSHCOMMAND
-    	    else
     		echo "$ac_t""yes" 1>&1
-    	    fi
     	fi
     fi
 fi
+set +x
 if test -z "$RSHCOMMAND" ; then
     echo "configure: warning: You must use the secure server to start programs" 1>&2
 fi
